<section class="hero is-success">
	<div class="hero-body">
		<div class="container">
			<h1 class="title">
				ユーザー編集
			</h1>
		</div>
	</div>
</section>


<% if @user.errors.any? %>
	<div class="notification is-danger">
		<h2><%= pluralize(@user.errors.count, "error") %>　『エラーが出ています』</h2>
			<ul>
				<% @user.errors.full_messages.each do |message| %>
					<li><%= message %></li>
				<% end %>
			</ul>
	</div>
<% end %>

<section class="section">
	<div class="container">
		<div class="columns is-centered">
			<div class="column is-6">
				<%= form_for @user do |f| %>

				<div class="field">
					<%= f.label :username, "ユーザー名", class: "label" %>
					<%= f.text_field :username, class: "input" %>
				</div>

				<div class="field">
					<%= f.label :email, "メールアドレス", class: "label" %>
					<%= f.text_field :email, class: "input" %>
				</div>

				<div class="field">
					<%= f.label :profile, "プロフィール", class: "label" %>
					<%= f.text_field :profile, class: "textarea" %>
				</div>

				<div class="profile-img">
					<%= f.label :profile_image, "プロフィール画像", class: "label" %>
					<%= attachment_image_tag @user, :profile_image, id: "file-preview", style: "width:30%; "%>
				</div>

				<div class="profile_img-new-form">
			        <%= f.attachment_field :profile_image, id: "file_btn" %>
			    </div><br>


				<%= f.submit "更新", class: "button is-success" %>
				<% end %>
			</div>
		</div>
	</div>
</section>

<!-- 画像プレビュー -->
<script type="text/javascript">
$(function() {
 function readURL(input) {
   if (input.files && input.files[0]) {
     var reader = new FileReader();
     reader.onload = function (e) {
       $('#file-preview').attr('src', e.target.result);
     }
     reader.readAsDataURL(input.files[0]);
   }
 }
 $('#file_btn').change(function(){
   readURL(this);
 });
});
</script>
<!-- 画像プレビュー -->